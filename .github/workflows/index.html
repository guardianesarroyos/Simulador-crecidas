<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerta Temprana de Inundaciones</title>
    <style>
        :root {
            color-scheme: light dark;
            --primary: #0077b6;
            --primary-dark: #005a8d;
            --primary-light: #48a9e6; /* Color más claro para títulos en modo oscuro */
            --secondary: #4fc3f7;
            --warning: #ff9800;
            --danger: #f44336;
            --light-bg: #f4f9fc;
            --dark-bg: #121212;
            --card-bg-light: #fff;
            --card-bg-dark: #1e1e1e;
            --text-light: #333;
            --text-dark: #ffffff; /* Blanco puro para mejor contraste */
            --text-secondary-dark: #cccccc; /* Gris más claro para texto secundario */
            --label-dark: #e0e0e0; /* Color específico para etiquetas en modo oscuro */
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--light-bg);
            color: var(--text-light);
            line-height: 1.6;
        }
        
        @media (prefers-color-scheme: dark) {
            body {
                background-color: var(--dark-bg);
                color: var(--text-dark);
            }
            h1, h3 {
                color: var(--primary-light); /* Color más claro para títulos */
            }
            label {
                color: var(--label-dark); /* Color específico para etiquetas */
            }
            .resultado, #guia {
                background-color: var(--card-bg-dark);
                color: var(--text-dark);
            }
            select, input[type="range"] {
                background-color: var(--card-bg-dark);
                color: var(--text-dark);
                border: 1px solid #555;
            }
            .leyenda-color {
                border: 1px solid #555;
            }
            footer {
                border-top: 1px solid #444;
                color: var(--text-secondary-dark);
            }
            .checkbox-group {
                background: rgba(255, 255, 255, 0.08);
            }
            .checkbox-group label {
                color: var(--text-dark); /* Etiquetas de checkbox más claras */
            }
            .leyenda-item {
                background: rgba(255, 255, 255, 0.08);
            }
            #guia {
                background: rgba(0, 119, 182, 0.2);
            }
        }
        
        h1, h3 {
            color: var(--primary);
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        h3 {
            font-size: 1.5rem;
            margin-top: 0.5rem;
            color: var(--text-light);
        }
        
        .control-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-light);
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        select:focus, input[type="range"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 119, 182, 0.2);
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            height: 8px;
            background: #ddd;
            border-radius: 4px;
            padding: 0;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .checkbox-group {
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(0, 119, 182, 0.05);
            border-radius: 8px;
        }
        
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: normal;
            margin-bottom: 0.75rem;
            cursor: pointer;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        #mapa {
            width: 100%;
            height: 220px;
            background: #dff6fd;
            margin: 1.5rem 0;
            border: 1px solid #b2ebf2;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .zona {
            position: absolute;
            width: 100%;
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        #cauce { height: 30%; bottom: 0; background: var(--secondary); }
        #calles { height: 0; bottom: 30%; background: var(--warning); opacity: 0.8; }
        #casas { height: 0; bottom: 30%; background: var(--danger); opacity: 0.8; }
        
        .leyenda {
            display: flex;
            justify-content: space-around;
            margin: 1rem 0 1.5rem;
            gap: 0.5rem;
        }
        
        .leyenda-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.05);
        }
        
        .leyenda-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .resultado {
            background: var(--card-bg-light);
            color: var(--text-light);
            padding: 1.25rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        
        .resultado p {
            margin: 0.75rem 0;
            font-size: 1.05rem;
        }
        
        .resultado strong {
            color: var(--primary);
        }
        
        #btn-guia {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            font-weight: 600;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        #btn-guia:hover {
            background: var(--primary-dark);
        }
        
        #guia {
            background: rgba(0, 119, 182, 0.08);
            padding: 1.25rem;
            border-left: 4px solid var(--primary);
            margin-top: 0.5rem;
            border-radius: 0 8px 8px 0;
            display: none;
        }
        
        #guia p {
            margin: 0.75rem 0;
        }
        
        #guia strong {
            color: var(--primary);
        }
        
        footer {
            text-align: center;
            margin-top: 2.5rem;
            padding: 1.5rem 0;
            border-top: 1px solid #ddd;
            font-size: 0.9rem;
            color: #666;
        }
        
        footer strong {
            color: var(--primary);
        }
    </style>
</head>
<body>
<div class="container">
  <h3><strong>Alerta Temprana Arroyo Escobar</strong></h3>
  
  <div class="control-group">
    <label for="duracion">Duración de lluvia:</label>
    <select id="duracion">
      <option value="24h">24 horas</option>
      <option value="48h">48 horas</option>
      <option value="72h">72 horas</option>
    </select>
  </div>
  
  <button id="btn-guia">📌 ¿Cómo elegir el escenario correcto?</button>
  <div id="guia">
    <p><strong>24 horas:</strong> Tormentas fuertes y repentinas. El arroyo puede subir peligrosamente en pocas horas, pero baja rápido.</p>
    <p><strong>48 horas:</strong> Lluvias intermitentes (paran y vuelven). El arroyo mantiene nivel alto por más tiempo.</p>
    <p><strong>72 horas:</strong> Lluvias débiles pero constantes. El suelo se satura gradualmente.</p>
    <p>🔍 <strong>Consejo:</strong> Verifica si el pronóstico menciona "tormenta aislada" (24h), "lluvias intermitentes" (48h) o "lluvias persistentes" (72h).</p>
  </div>
  
  <div class="control-group">
    <label for="lluvia">Lluvia acumulada: <span id="lluvia-value">40</span> mm</label>
    <input type="range" id="lluvia" min="40" max="240" step="10" value="40">
  </div>
  
  <div class="checkbox-group">
    <label>Factores de corrección:</label>
    <label><input type="checkbox" id="sudestada"> Sudestada (+50 cm)</label>
    <label><input type="checkbox" id="lluvia_aguas_arriba"> Lluvia aguas arriba (+30 cm)</label> 
  </div>
  
  <div id="mapa">
    <div id="cauce" class="zona"></div>
    <div id="calles" class="zona"></div>
    <div id="casas" class="zona"></div>
  </div>
  
  <div class="leyenda">
    <div class="leyenda-item"><div class="leyenda-color" style="background: var(--secondary);"></div> Cauce</div>
    <div class="leyenda-item"><div class="leyenda-color" style="background: var(--warning);"></div> Calles</div>
    <div class="leyenda-item"><div class="leyenda-color" style="background: var(--danger);"></div> Casas</div>
  </div>
  
  <div class="resultado">
    <p><strong>Altura Arroyo Escobar:</strong> <span id="altura">2.4</span> m</p>
    <p><strong>Impacto:</strong> <span id="impacto">En cauce (¼ caudal)</span></p>
    <p><strong>Tiempo al pico:</strong> <span id="tiempo">8</span> horas</p>
  </div>
</div>

<footer>
    <div>Creado por <strong>guardianesarroyosba</strong> – Ing. Maschwitz</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle guía
    const btnGuia = document.getElementById('btn-guia');
    const guia = document.getElementById('guia');
    
    btnGuia.addEventListener('click', function() {
        if (guia.style.display === 'block') {
            guia.style.display = 'none';
            btnGuia.innerHTML = '📌 ¿Cómo elegir el escenario correcto?';
        } else {
            guia.style.display = 'block';
            btnGuia.innerHTML = '▲ Ocultar guía';
        }
    });
    
    // Actualizar valor del slider
    const lluviaSlider = document.getElementById('lluvia');
    const lluviaValue = document.getElementById('lluvia-value');
    
    lluviaSlider.addEventListener('input', function() {
        lluviaValue.textContent = this.value;
        updateSimulation();
    });
    
    // Checkboxes
    document.getElementById('sudestada').addEventListener('change', updateSimulation);
    document.getElementById('lluvia_aguas_arriba').addEventListener('change', updateSimulation);
    
    // Select
    document.getElementById('duracion').addEventListener('change', updateSimulation);
    
    function updateSimulation() {
        // Valores actuales
        const lluvia = parseInt(lluviaSlider.value);
        const duracion = document.getElementById('duracion').value;
        const sudestada = document.getElementById('sudestada').checked;
        const lluviaAguasArriba = document.getElementById('lluvia_aguas_arriba').checked;
        
        // Cálculos simulados (simplificados)
        let alturaBase = 2.0 + (lluvia - 40) / 100;
        let tiempoPico = 8;
        
        // Ajustes por duración
        if (duracion === '24h') {
            alturaBase *= 1.2;
            tiempoPico = 6;
        } else if (duracion === '72h') {
            alturaBase *= 1.4;
            tiempoPico = 12;
        }
        
        // Factores de corrección
        if (sudestada) alturaBase += 0.5;
        if (lluviaAguasArriba) alturaBase += 0.3;
        
        // Actualizar visualización
        document.getElementById('altura').textContent = alturaBase.toFixed(1);
        document.getElementById('tiempo').textContent = tiempoPico;
        
        // Actualizar mapa
        const cauce = document.getElementById('cauce');
        const calles = document.getElementById('calles');
        const casas = document.getElementById('casas');
        
        if (alturaBase < 3.0) {
            cauce.style.height = '30%';
            calles.style.height = '0';
            casas.style.height = '0';
            document.getElementById('impacto').textContent = 'En cauce (¼ caudal)';
        } else if (alturaBase < 4.0) {
            cauce.style.height = '50%';
            calles.style.height = '20%';
            casas.style.height = '0';
            document.getElementById('impacto').textContent = 'Inundación de calles bajas';
        } else {
            cauce.style.height = '70%';
            calles.style.height = '30%';
            casas.style.height = '20%';
            document.getElementById('impacto').textContent = 'Inundación de viviendas';
        }
    }
    
    // Inicializar
    updateSimulation();
});
</script>
</body>
</html>
