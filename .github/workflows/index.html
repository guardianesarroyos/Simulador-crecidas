<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerta Temprana de Inundaciones</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.5;
        }
        h1 {
            color: #0066cc;
            text-align: center;
            margin-bottom: 20px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .checkbox-group {
            margin: 15px 0;
        }
        .checkbox-group label {
    display: inline-block;
    margin-right: -1px;
    font-weight: normal;
        }
        #mapa {
            width: 100%;
            height: 200px;
            background: #e0f7fa;
            margin: 20px 0;
            border: 1px solid #b2ebf2;
            position: relative;
            overflow: hidden;
            border-radius: 4px;
        }
        .zona {
            position: absolute;
            width: 100%;
            transition: all 0.5s;
        }
        #cauce { height: 30%; bottom: 0; background: #4fc3f7; }
        #calles { height: 0; bottom: 30%; background: #ff9800; opacity: 0.7; }
        #casas { height: 0; bottom: 30%; background: #f44336; opacity: 0.7; }
        .resultado {
            background: #fff;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .leyenda {
            display: flex;
            justify-content: space-around;
            margin: 10px 0 20px;
        }
        .leyenda-item {
            display: flex;
            align-items: center;
        }
        .leyenda-color {
            width: 20px;
            height: 20px;
            margin-right: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        #btn-guia {
            background: #0066cc;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            width: 100%;
            font-size: 16px;
        }
        #btn-guia:hover {
            background: #0055aa;
        }
        #guia {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #0066cc;
            display: none;
        }
        #guia p {
            margin: 5px 0;
        }
        #guia strong {
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌊 Alerta Temprana Inundaciones</h1>
        
        <div class="control-group">
            <label for="duracion">Duración de lluvia:</label>
            <select id="duracion">
                <option value="24h" title="Lluvias intensas y cortas. El arroyo sube/baja rápido (mayor peligro inmediato).">24 horas</option>
                <option value="48h" title="Lluvias intermitentes (momentos fuertes y de calma). Inundaciones frecuentes pero más predecibles.">48 horas</option>
                <option value="72h" title="Lluvias persistentes pero menos intensas. El agua no baja completamente, riesgo acumulado.">72 horas</option>
            </select>
        </div>

        <button id="btn-guia">📌 ¿Cómo elegir el escenario correcto?</button>
        <div id="guia">
            <p><strong>24 horas</strong>: Tormentas fuertes y repentinas. El arroyo puede subir peligrosamente en pocas horas, pero baja rápido. <em>Ejemplo: 100 mm en un día.</em></p>
            <p><strong>48 horas</strong>: Lluvias intermitentes (paran y vuelven). El arroyo mantiene nivel alto por más tiempo. <em>Ejemplo: 30 mm hoy, 40 mm mañana.</em></p>
            <p><strong>72 horas</strong>: Lluvias débiles pero constantes. El suelo se satura gradualmente. <em>Ejemplo: 20 mm cada día por 3 días.</em></p>
            <p>🔍 <strong>Consejo</strong>: Verifica si el pronóstico menciona "tormenta aislada" (24h), "lluvias intermitentes" (48h) o "lluvias persistentes" (72h).</p>
        </div>

        <div class="control-group">
            <label for="lluvia">Lluvia acumulada: <span id="lluvia-value">40</span> mm</label>
            <input type="range" id="lluvia" min="40" max="240" step="10" value="40">
        </div>

        <div class="checkbox-group">
            <label>Factores de corrección:</label>
            <label><input type="checkbox" id="sudestada"> Sudestada (+50 cm)</label>
            <label><input type="checkbox" id="lluvia_aguas_arriba"> Lluvia aguas arriba (+30 cm)</label> 
        </div>

        <div id="mapa">
            <div id="cauce" class="zona"></div>
            <div id="calles" class="zona"></div>
            <div id="casas" class="zona"></div>
        </div>

        <div class="leyenda">
            <div class="leyenda-item">
                <div class="leyenda-color" style="background: #4fc3f7;"></div>
                <span>Cauce</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-color" style="background: #ff9800;"></div>
                <span>Patios y Calles</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-color" style="background: #f44336;"></div>
                <span>Casas</span>
            </div>
        </div>

        <div class="resultado">
            <p><strong>Altura Arroyo Escobar :</strong> <span id="altura">2.4</span> m</p>
            <p><strong>Impacto:</strong> <span id="impacto">En cauce (¼ caudal)</span></p>
            <p><strong>Tiempo al pico:</strong> <span id="tiempo">8</span> horas</p>
        </div>
    </div>

    <script>
        // Datos de los escenarios
        const escenarios = {
            "24h": [
                { lluvia: 40, altura: 2.4, impacto: "En cauce (¼ caudal)", tiempo: 8, calles: 0, casas: 0 },
                { lluvia: 80, altura: 3.2, impacto: "En cauce (½ caudal)", tiempo: 8, calles: 0, casas: 0 },
                { lluvia: 98, altura: 3.5, impacto: "Caudal completo", tiempo: 8, calles: 0, casas: 0 },
                { lluvia: 130, altura: 4.8, impacto: "Inundación calles + CASAS Bajas", tiempo: 8, calles: 30, casas: 10 },
                { lluvia: 200, altura: 4.8, impacto: "Inundación CASAS Medias/Altas", tiempo: 8, calles: 30, casas: 40 }
            ],
            "48h": [
                { lluvia: 80, altura: 3.2, impacto: "En cauce (½ caudal)", tiempo: 12, calles: 0, casas: 0 },
                { lluvia: 110, altura: 4.1, impacto: "Inundación calles", tiempo: 12, calles: 20, casas: 0 },
                { lluvia: 140, altura: 4.3, impacto: "Inundación calles + CASAS Bajas", tiempo: 12, calles: 30, casas: 15 },
                { lluvia: 200, altura: 4.8, impacto: "Inundación CASAS Medias", tiempo: 12, calles: 30, casas: 30 },
                { lluvia: 240, altura: 5.2, impacto: "Corte Ruta 9", tiempo: 12, calles: 40, casas: 50 }
            ],
            "72h": [
                { lluvia: 80, altura: 2.9, impacto: "En cauce (sin impacto)", tiempo: 24, calles: 0, casas: 0 },
                { lluvia: 110, altura: 3.3, impacto: "En cauce (¾ caudal)", tiempo: 24, calles: 0, casas: 0 },
                { lluvia: 140, altura: 3.7, impacto: "Caudal completo", tiempo: 24, calles: 0, casas: 0 },
                { lluvia: 200, altura: 4.3, impacto: "Inundación calles + CASAS Bajas", tiempo: 24, calles: 25, casas: 20 }
            ]
        };

        // Elementos UI
        const duracionSelect = document.getElementById("duracion");
        const lluviaSlider = document.getElementById("lluvia");
        const lluviaValue = document.getElementById("lluvia-value");
        const sudestadaCheckbox = document.getElementById("sudestada");
        const lluviaAguasArribaCheckbox = document.getElementById("lluvia_aguas_arriba");
        const alturaSpan = document.getElementById("altura");
        const impactoSpan = document.getElementById("impacto");
        const tiempoSpan = document.getElementById("tiempo");
        const cauceZona = document.getElementById("cauce");
        const callesZona = document.getElementById("calles");
        const casasZona = document.getElementById("casas");
        const btnGuia = document.getElementById("btn-guia");
        const guia = document.getElementById("guia");

        // Eventos
        duracionSelect.addEventListener("change", actualizarSimulacion);
        lluviaSlider.addEventListener("input", actualizarSimulacion);
        sudestadaCheckbox.addEventListener("change", actualizarSimulacion);
        lluviaAguasArribaCheckbox.addEventListener("change", actualizarSimulacion);
        btnGuia.addEventListener("click", function() {
            guia.style.display = guia.style.display === "none" ? "block" : "none";
        });

        function actualizarSimulacion() {
            const duracion = duracionSelect.value;
            const lluvia = parseInt(lluviaSlider.value);
            const sudestada = sudestadaCheckbox.checked;
            const lluviaAguasArriba = lluviaAguasArribaCheckbox.checked;

            lluviaValue.textContent = lluvia;

            const escenarioDuracion = escenarios[duracion];
            let escenario = escenarioDuracion[escenarioDuracion.length - 1];
            
            for (let i = 0; i < escenarioDuracion.length; i++) {
                if (lluvia <= escenarioDuracion[i].lluvia) {
                    escenario = escenarioDuracion[i];
                    break;
                }
            }

            let altura = escenario.altura;
            let impacto = escenario.impacto;
            let tiempo = escenario.tiempo;
            let alturaExtra = 0;

            if (sudestada) {
                alturaExtra += 0.5;
                impacto += " + Sudestada";
            }
            if (lluviaAguasArriba) {
                alturaExtra += 0.3;
                impacto += " + Lluvia aguas arriba";
            }

            alturaSpan.textContent = (altura + alturaExtra).toFixed(1);
            impactoSpan.textContent = impacto;
            tiempoSpan.textContent = tiempo;

            const alturaCauceBase = 30;
            const alturaCauce = alturaCauceBase + (alturaExtra * 20);
            cauceZona.style.height = `${alturaCauce}%`;
            callesZona.style.height = `${escenario.calles}%`;
            callesZona.style.bottom = `${alturaCauce}%`;
            casasZona.style.height = `${escenario.casas}%`;
            casasZona.style.bottom = `${alturaCauce}%`;
        }

        // Inicializar
        actualizarSimulacion();
    </script>
</body>
</html>
